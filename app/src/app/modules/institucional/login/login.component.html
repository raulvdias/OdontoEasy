<section class="w-full p-5 bg-gray-50 dark:bg-slate-800 sm:p-20">
  <div class="my-20">
    <div
      class="mat-elevation-z4 grid grid-cols-1 place-items-center w-full mx-auto max-w-2xl min-h-[80%] rounded-md bg-white text-black dark:bg-black dark:text-white"
    >
      <img
        *ngIf="!isNewUser"
        class="py-8"
        priority
        width="200"
        height="50"
        ngSrc="login.webp"
        alt="Logo OdontoEasy"
      />
      <img
        *ngIf="isNewUser"
        class="py-8"
        priority
        width="200"
        height="50"
        ngSrc="cadastro.webp"
        alt="Cadastro OdontoEasy"
      />

      <div
        *ngIf="!isNewUser"
        class="w-full flex flex-col gap-10 place-items-center pb-10"
      >
        <div [formGroup]="formLogin" class="grid grid-cols-1 gap-2 min-w-[80%]">
          <mat-form-field
            class="pt-5"
            appearance="fill"
            subscriptSizing="dynamic"
          >
            <mat-label>E-mail</mat-label>
            <input matInput formControlName="email" />
            <mat-icon matPrefix>email</mat-icon>
          </mat-form-field>
          <mat-form-field appearance="fill" subscriptSizing="dynamic">
            <mat-label>Senha</mat-label>
            <input
              matInput
              type="password"
              formControlName="password"
              #passwordLogin
            />
            <mat-icon
              *ngIf="passwordLogin.type === 'password'"
              matPrefix
              (click)="
                passwordLogin.type === 'password'
                  ? (passwordLogin.type = 'text')
                  : (passwordLogin.type = 'password')
              "
              >visibility_off</mat-icon
            >
            <mat-icon
              *ngIf="passwordLogin.type !== 'password'"
              matPrefix
              (click)="
                passwordLogin.type !== 'password'
                  ? (passwordLogin.type = 'password')
                  : (passwordLogin.type = 'text')
              "
              >visibility</mat-icon
            >
          </mat-form-field>
          <a
            class="text-sm font-semibold cursor-pointer text-end m-1 hover:underline"
            >Esqueceu a senha?</a
          >
        </div>
        <button
          (click)="userLogin()"
          class="min-w-[30%] rounded-full bg-black dark:bg-white text-white dark:text-black p-2 cursor-pointer flex justify-center"
        >
          <span *ngIf="!isLoading">Entrar</span>
          <mat-spinner
            *ngIf="isLoading"
            [diameter]="24"
            [mode]="'indeterminate'"
          ></mat-spinner>
        </button>
        <a
          (click)="isNewUser = !isNewUser"
          class="flex justify-center font-semibold text-md cursor-pointer hover:underline"
        >
          Criar conta?
        </a>
      </div>

      <div
        *ngIf="isNewUser"
        [formGroup]="form"
        class="grid grid-cols-1 gap-10 py-10 min-w-[80%]"
      >
        <mat-form-field
          class="w-full"
          appearance="fill"
          subscriptSizing="dynamic"
        >
          <mat-label>Nome da empresa</mat-label>
          <input matInput formControlName="name" />
          <mat-icon matPrefix>person</mat-icon>
        </mat-form-field>
        <mat-form-field
          class="w-full"
          appearance="fill"
          subscriptSizing="dynamic"
        >
          <mat-label>E-mail</mat-label>
          <input matInput formControlName="email" />
          <mat-icon matPrefix>email</mat-icon>
        </mat-form-field>
        <mat-form-field
          class="w-full"
          appearance="fill"
          subscriptSizing="dynamic"
        >
          <mat-label>Telefone</mat-label>
          <input matInput formControlName="phone" />
          <mat-icon matPrefix>phone</mat-icon>
        </mat-form-field>
        <mat-form-field
          class="w-full"
          appearance="fill"
          subscriptSizing="dynamic"
        >
          <mat-label>Senha</mat-label>
          <input
            matInput
            type="password"
            formControlName="password"
            #password
          />
          <mat-icon
            *ngIf="password.type === 'password'"
            matPrefix
            (click)="
              password.type === 'password'
                ? (password.type = 'text')
                : (password.type = 'password')
            "
            >visibility_off</mat-icon
          >
          <mat-icon
            *ngIf="password.type !== 'password'"
            matPrefix
            (click)="
              password.type !== 'password'
                ? (password.type = 'password')
                : (password.type = 'text')
            "
            >visibility</mat-icon
          >
        </mat-form-field>

        <button
          class="min-w-[30%] rounded-full bg-black dark:bg-white text-white dark:text-black p-2 cursor-pointer flex justify-center"
        >
          <span *ngIf="!isLoading">Criar conta</span>
          <mat-spinner
            *ngIf="isLoading"
            [diameter]="24"
            [mode]="'indeterminate'"
          ></mat-spinner>
        </button>
      </div>
    </div>
  </div>
</section>
